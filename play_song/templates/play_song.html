<!DOCTYPE html>
<html lang="en">



<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Song Details</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f8f8;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        /* ================= HEADER ================= */
        .song-header {
            background-color: #C48B5F;
            /* Maroon color */
            color: #ffffff;
            /* White color for text */
            text-align: center;
            padding: 20px;
            position: relative;
        }

        .page-title {
            font-weight: 600;
            font-size: 24px;
            color: #FFFFFF;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        /* ================= SONG ================= */
        .song-info {
            display: flex;
            /* Use flexbox to align items side by side */
            align-items: center;
            /* Aligns items vertically in the center */
            justify-content: start;
            /* Aligns content to the start of the flex container */
            padding: 20px;
        }

        .song-header {
            background-color: #C48B5F;
            border-radius: 20px;
            /* Maroon color */
            color: #ffffff;
            /* White color for text */
            text-align: center;
            padding: 20px;
            position: relative;
        }

        .song-title {
            font-weight: 600;
            font-size: 36px;
            margin: 0;
        }

        .header {
            font-weight: 600;
            font-size: 24px;
            color: #1E1E1E;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .song-details {
            background-color: #FFFFFF;
            /* White color for the box */
            border: 1px solid #d3d3d3;
            border-radius: 4px;
            padding: 20px;
            margin-bottom: 20px;
        }

        /* ================= Play progress bar ================= */

        .play-progress {
            width: 100%;
            height: 10px;
            background-color: #ffffff;
            margin-bottom: 20px;
        }

        input[type=range] {
            background: linear-gradient(to right, #C48B5F 0%, #C48B5F var(--progress), #ddd var(--progress), #ddd 100%);
            appearance: none;
            width: 100%;
            height: 10px;
            border-radius: 5px;
            outline: none;
        }

        input[type=range]::-webkit-slider-thumb {
            appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            background: #C48B5F;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.5);
        }

        input[type=range]::-moz-range-thumb {
            width: 25px;
            height: 25px;
            background: #C48B5F;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.5);
        }

        #progressValue {
            margin-left: 10px;
            font-weight: 600;
        }

        /* ================= Buttons ================= */
        .play-button,
        .add-to-playlist-button,
        .download-button,
        .back-button {
            font-weight: 600;
            padding: 10px 20px;
            margin-bottom: 10px;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            display: inline-block;
        }

        .play-button,
        .add-to-playlist-button,
        .download-button {
            background-color: #C48B5F;
            /* Maroon background */
            color: #FFFFFF;
            /* White text */
        }

        .play-button:hover,
        .add-to-playlist-button:hover,
        .download-button:hover {
            background-color: #A5694F;
        }

        .back-button {
            background-color: transparent;
            color: #C48B5F;
            /* Maroon color */
            border: 2px solid #C48B5F;
        }

        .back-button:hover {
            color: #A5694F;
            border-color: #A5694F;
        }

        /* Add to playlist form */
        .add-to-playlist-form {
            display: none;
        }

        /* Success message */
        .success-message {
            display: none;
        }

        /* Dropdown styling */
        #playlist-dropdown {
            padding: 8px;
            margin-bottom: 10px;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        /* Form buttons */
        #playlist-form button {
            font-weight: 600;
            padding: 10px 20px;
            margin-bottom: 10px;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            display: inline-block;
            background-color: #C48B5F;
            /* Maroon background */
            color: #FFFFFF;
            /* White text */
        }

        #playlist-form button:hover {
            background-color: #A5694F;
        }
    </style>
</head>

<body>

    <!-- Your existing HTML structure -->
    <!-- SONG DETAIL section -->
    <div class="song-header">
        <p class="page-title">Play Song</p>
    </div>

    {% if song %}
    <div class="song-info">
        <div class="song-logo"></div>
        <div class="song-text">
            <p class="song-title">{{ song.judul }}</p>
            <p class="song-author">{{ song.penyanyi }}</p>
        </div>
    </div>
    <div class="song-details">
        <table>
            <tr>
                <td><strong>Genre Lagu: </strong><br>
                    {% for genre in genres %}
                    - {{ genre }}<br>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <td><strong>Penulis Lagu: </strong><br>
                    {% for songwriter in songwriters %}
                    - {{ songwriter }}<br>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <td><strong>Durasi: </strong>{{ song.durasi }}</td>
            </tr>
            <tr>
                <td><strong>Tanggal Rilis: </strong>{{ song.tanggal_rilis }}</td>
            </tr>
            <tr>
                <td><strong>Tahun: </strong>{{ song.tahun }}</td>
            </tr>
            <tr>
                <td><strong>Total Dimainkan: </strong>
                    <div class="total-play">{{ song.total_play }}</div>
                </td>
            </tr>
            <tr>
                <td><strong>Total Downloaded: </strong>{{ song.total_download }}</td>
            </tr>
            <tr>
                <td><strong>Album: </strong><br>
                    {% for album in albums %}
                    - {{ album }}
                    {% endfor %}
                </td>
            </tr>
        </table>
    </div>
    {% endif %}

    <!-- Play progress bar -->
    <div class="play-progress">
        <div class="slider-container">
            <input type="range" id="progress" min="0" max="100" value="0">
            <span id="progressValue">0</span>%
        </div>
    </div>
    <br>

    <!-- Buttons -->
    <button class="play-button">Play</button>
    <button class="add-to-playlist-button">Add to Playlist</button>
    <button class="download-button">Download</button>
    <button class="back-button" onclick="history.back()">Kembali</button>

    <!-- ================= ADD SONG TO USER PLAYLIST section ================= -->
    <div class="add-to-playlist-form" style="display: none;">
        <h2>ADD SONG TO USER PLAYLIST</h2>
        <form id="playlist-form">
            <p>Judul: Song1</p>
            <p>Artist: Artist1</p>
            <label for="playlist-dropdown">Playlist:</label>
            <select id="playlist-dropdown" required>
                <!-- User's playlists options will be populated here -->
            </select>
            <button type="submit">TAMBAH</button>
            <button type="button" class="cancel-add-to-playlist">KEMBALI</button>
        </form>
    </div>

    <!-- Success message after adding song to playlist -->
    <div class="success-message" style="display: none;">
        <p>Berhasil menambahkan Lagu dengan judul 'Song1' ke 'Playlist1'!</p>
        <button class="go-to-playlist">KE PLAYLIST</button>
        <button class="back-to-song-details">KEMBALI</button>
    </div>

    <!-- ================= DONWLOAD ================= -->
    <!-- Success message after downloading song -->
    <div class="success-download-message" style="display: none;">
        <p>Berhasil mengunduh Lagu dengan judul ‘Song1’!</p>
        <button class="go-to-download-list">KE DAFTAR DOWNLOAD</button>
        <button class="back-to-song-details">KEMBALI</button>
    </div>


    <!-- Script -->
    <script>
        // Update the displayed progress value when the slider is moved
        document.getElementById('progress').addEventListener('input', function () {
            var progressValue = this.value;
            document.getElementById('progressValue').innerText = progressValue;
            this.style.setProperty('--progress', progressValue + '%');
        });

        function playSong() {
            var progress = document.getElementById('progress').value;
            if (progress > 70) {
                addPlaySongEntry();
                updateTotalPlay();
                alert("Lagu dimainkan dan entri AKUN_PLAY_SONG ditambahkan.");
            } else {
                alert("Progress kurang dari 70%, tidak ada aksi yang diambil.");
            }
        }

        function addPlaySongEntry() {
            console.log("Entry AKUN_PLAY_SONG ditambahkan.");
        }

        function updateTotalPlay() {
            var totalPlayElement = document.querySelector('.total-play');
            var totalPlay = parseInt(totalPlayElement.innerText) + 1;
            totalPlayElement.innerText = totalPlay;
        }
    </script>

</body>

</html>